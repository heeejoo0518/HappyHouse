"use strict";(self["webpackChunkhappyhouse"]=self["webpackChunkhappyhouse"]||[]).push([[117],{8117:function(t,e,n){n.r(e),n.d(e,{default:function(){return d}});var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-container",{staticClass:"bv-example-row mt-3"},[n("b-row",{staticClass:"mb-1"},[n("b-col",{staticClass:"text-left"},[n("b-button",{attrs:{variant:"outline-primary",size:"sm"},on:{click:t.listArticle}},[t._v("목록")])],1),null!=t.userInfo&&t.article.userid==t.userInfo.userid?n("b-col",{staticClass:"text-right"},[n("b-button",{staticClass:"mr-2",attrs:{variant:"outline-info",size:"sm"},on:{click:t.moveModifyArticle}},[t._v("글수정")]),n("b-button",{attrs:{variant:"outline-danger",size:"sm"},on:{click:t.deleteArticle}},[t._v("글삭제")])],1):t._e()],1),n("b-row",{staticClass:"mb-1"},[n("b-col",[n("b-card",{staticClass:"mb-2",attrs:{"header-html":"<h3 class='mb-4 mt-1'>"+t.article.subject+"</h3><div class='text-right'><strong>"+t.article.userid+"</strong>  "+t.article.regtime+"</div>","border-variant":"white","no-body":""}},[n("b-card-body",{staticClass:"text-left",staticStyle:{"min-height":"400px"}},[n("div",{domProps:{innerHTML:t._s(t.message)}})])],1),n("hr",{staticClass:"my-4"}),n("div",{},[null!=t.userInfo?n("b-card",[n("b-row",[n("b-col",{attrs:{cols:"10"}},[n("b-form-textarea",{attrs:{id:"textarea",placeholder:"Enter something...",rows:"3","max-rows":"6"},model:{value:t.comment,callback:function(e){t.comment=e},expression:"comment"}})],1),n("b-col",{attrs:{cols:"2"}},[n("button",{staticClass:"btn btn-outline-primary",on:{click:t.createComment}},[t._v(" 등록 ")])])],1)],1):t._e(),t._l(t.article.comments,(function(e){return n("b-card",{key:e.commentno,staticClass:"text-left"},[n("b-card-text",[n("b",[t._v(t._s(e.userid))]),t._v(" "+t._s(e.regtime)+" "),n("span",[null!=t.userInfo&&e.userid==t.userInfo.userid?n("button",{staticClass:"btn btn-outline-danger btn-sm",on:{click:function(n){return t.deleteComment(e.commentno)}}},[t._v(" 삭제 ")]):t._e()])]),n("b-card-text",[t._v(t._s(e.content))])],1)}))],2)],1)],1)],1)},r=[],o=n(2164),c=n(4665);const a="memberStore";var i={name:"BoardDetail",data(){return{article:{},comment:""}},computed:{message(){return this.article.content?this.article.content.split("\n").join("<br>"):""},...(0,c.rn)(a,["userInfo"])},created(){(0,o.fq)(this.$route.params.articleno,(t=>{this.article=t.data}),(t=>{console.log("삭제시 에러발생!!",t)})),this.listComments()},methods:{listArticle(){this.$router.push({name:"boardList"})},moveModifyArticle(){this.$router.replace({name:"boardModify",params:{articleno:this.article.articleno}})},deleteArticle(){confirm("정말로 삭제?")&&(0,o.jX)(this.article.articleno,(()=>{this.$router.push({name:"boardList"})}))},listComments(){(0,o.BM)(this.$route.params.articleno,(t=>{this.article=t.data}),(t=>{console.log(t)}))},createComment(){(0,o.Yr)({articleno:this.article.articleno,userid:this.userInfo.userid,content:this.comment},(t=>{"success"===t.data&&(this.listComments(),this.comment="")}),(t=>{console.log("댓글 등록시 에러발생!!",t)}))},deleteComment(t){(0,o.YF)(t,(t=>{"success"===t.data&&this.listComments()}),(t=>{console.log("댓글 등록시 에러발생!!",t)}))}}},l=i,u=n(1001),m=(0,u.Z)(l,s,r,!1,null,null,null),d=m.exports},2164:function(t,e,n){n.d(e,{BM:function(){return m},FX:function(){return u},YF:function(){return h},Yr:function(){return d},cn:function(){return i},fq:function(){return a},hY:function(){return c},jC:function(){return o},jX:function(){return l}});var s=n(6927);const r=(0,s.b)();function o(t,e){r.get("/board").then(t).catch(e)}function c(t,e,n){r.defaults.headers["access-token"]=sessionStorage.getItem("access-token"),r.post("/board",JSON.stringify(t)).then(e).catch(n)}function a(t,e,n){r.get(`/board/${t}`).then(e).catch(n)}function i(t,e,n){r.defaults.headers["access-token"]=sessionStorage.getItem("access-token"),r.put(`/board/${t.articleno}`,JSON.stringify(t)).then(e).catch(n)}function l(t,e,n){r.defaults.headers["access-token"]=sessionStorage.getItem("access-token"),r.delete(`/board/${t}`).then(e).catch(n)}function u(t,e){r.get("/board/count").then(t).catch(e)}function m(t,e,n){r.get(`/board/${t}`).then(e).catch(n)}function d(t,e,n){r.defaults.headers["access-token"]=sessionStorage.getItem("access-token"),r.post("/board/comment",JSON.stringify(t)).then(e).catch(n)}function h(t,e,n){r.defaults.headers["access-token"]=sessionStorage.getItem("access-token"),r.delete(`board/comment/${t}`).then(e).catch(n)}}}]);
//# sourceMappingURL=117.af9623bb.js.map