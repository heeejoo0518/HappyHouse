(self["webpackChunkhappyhouse"]=self["webpackChunkhappyhouse"]||[]).push([[575],{1339:function(e,t,s){"use strict";s.d(t,{Z:function(){return d}});var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("b-modal",{ref:"modal",staticClass:"bv-example-row",attrs:{id:"house-detail-modal",title:e.house.apartmentName},on:{hidden:e.CLEAR_HOUSE},scopedSlots:e._u([{key:"modal-footer",fn:function(){return[s("div",[s("p",{staticClass:"float-left"}),e.check||null==e.userInfo?e._e():s("b-button",{staticClass:"float-right",attrs:{variant:"primary",size:"sm"},on:{click:e.addApt}},[e._v(" 관심지역 추가 ")]),e.check&&null!=e.userInfo?s("b-button",{staticClass:"float-right",attrs:{variant:"danger",size:"sm"},on:{click:e.deleteApt}},[e._v(" 관심지역 취소 ")]):e._e()],1)]},proxy:!0}])},[s("b-container",{attrs:{fluid:""}},[s("div",{staticStyle:{width:"400px",height:"300px"},attrs:{id:"newMap"}})])],1)},o=[],i=s(4665),n=s(1457);const r="houseStore",p="memberStore";var u={name:"HouseDetail",data(){return{map:null,markers:[]}},computed:{...(0,i.rn)(r,["house","houses","hospitals"]),...(0,i.rn)(p,["userInfo"]),check(){return"Y"==this.house.check}},methods:{...(0,i.OI)(r,["CLEAR_HOUSE"]),...(0,i.nv)(r,["getHouseDetail","getHospitalList"]),addApt(){(0,n.qP)({userid:this.userInfo.userid,aptCode:this.house.aptCode},(({data:e})=>{console.log(e);let t="등록 처리시 문제가 발생했습니다.";"success"===e.message&&(t="등록이 완료되었습니다.",this.house.check="Y",this.houses.push(this.house)),alert(t)}),(e=>{console.log(e)}))},deleteApt(){(0,n.Fh)({userid:this.userInfo.userid,aptCode:this.house.aptCode},(({data:e})=>{let t="삭제 처리시 문제가 발생했습니다.";"success"===e.message&&(t="삭제가 완료되었습니다.",this.house.check="N",this.houses.forEach(((e,t)=>{e.aptCode==this.house.aptCode&&this.houses.splice(t,1)}))),alert(t)}),(e=>{console.log(e)}))},makeMarkers(){this.markers=[];let e=null;var t=s(9325);this.hospitals.forEach((s=>{e=new kakao.maps.Marker({map:this.map,position:new kakao.maps.LatLng(parseFloat(s.wgs84Lat),parseFloat(s.wgs84Lon)),title:s.dutyName,image:new kakao.maps.MarkerImage(t,new kakao.maps.Size(35,35))}),this.markers.push(e);var a=new kakao.maps.InfoWindow({position:new kakao.maps.LatLng(s.wgs84Lat,s.wgs84Lon),content:`<div style="width:200px;\n          display: block;\n          background: #50627F;\n          color: #fff;\n          text-align: center;\n          height: 24px;\n          line-height:22px;\n          border-radius:4px;\n          padding:0px 10px;">${s.dutyName}</div>`});kakao.maps.event.addListener(e,"mouseover",this.makeOverListener(this.map,e,a)),kakao.maps.event.addListener(e,"mouseout",this.makeOutListener(a))}));var a=s(816);e=new kakao.maps.Marker({map:this.map,position:new kakao.maps.LatLng(parseFloat(this.house.lat),parseFloat(this.house.lng)),title:this.house.apartmentName,image:new kakao.maps.MarkerImage(a,new kakao.maps.Size(35,35))}),e.setMap(this.map),this.markers.push(e);var o=`<div style="width:350px; text-align:center; padding:5px;"><h5>${this.house.apartmentName}</h5></div>\n      <div style="width:350px; padding:5px">가격 : ${this.house.lowest},000 ~ ${this.house.highest},000원<br>\n      가까운 병원 : ${this.calculation()}</div>`,i=new kakao.maps.LatLng(this.house.lat,this.house.lng),n=new kakao.maps.InfoWindow({position:i,content:o});n.open(this.map,e)},initMap(){const e=document.getElementById("newMap"),t={center:new kakao.maps.LatLng(this.house.lat,this.house.lng),level:5};this.map=new kakao.maps.Map(e,t),this.map.setZoomable(!1)},setCenter(e,t){this.map.setCenter(new kakao.maps.LatLng(e,t))},makeOverListener(e,t,s){return function(){s.open(e,t)}},makeOutListener(e){return function(){e.close()}},calculation(){var e=Number.MAX_VALUE,t=-1;return this.hospitals.forEach(((s,a)=>{var o=parseFloat(s.wgs84Lat)-parseFloat(this.house.lat),i=parseFloat(s.wgs84Lon)-parseFloat(this.house.lng),n=Math.sqrt(Math.abs(o*o)+Math.abs(i*i));n<e&&(e=n,t=a)})),-1==t?"가까운 병원이 없습니다.":`${this.hospitals[t].dutyName}`}},mounted(){if(window.kakao&&window.kakao.maps)this.initMap();else{const e=document.createElement("script");e.src="//dapi.kakao.com/v2/maps/sdk.js?autoload=false&appkey=b9ba0fdeea1c1db7ad7f71e4962d1bb3",e.addEventListener("load",(()=>{kakao.maps.load(this.initMap)})),document.head.appendChild(e)}this.makeMarkers()},updated(){if(window.kakao&&window.kakao.maps)this.initMap();else{const e=document.createElement("script");e.src="//dapi.kakao.com/v2/maps/sdk.js?autoload=false&appkey=b9ba0fdeea1c1db7ad7f71e4962d1bb3",e.addEventListener("load",(()=>{kakao.maps.load(this.initMap)})),document.head.appendChild(e)}this.makeMarkers()}},c=u,l=s(1001),h=(0,l.Z)(c,a,o,!1,null,null,null),d=h.exports},6575:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return w}});var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.houses&&0!=e.houses.length?s("b-container",{staticClass:"bv-example-row mt-3"},[s("b-row",e._l(e.houses,(function(t,a){return s("b-card-group",{key:a,staticClass:"col-md-3"},[s("house-list-item",{staticStyle:{"margin-bottom":"3rem"},attrs:{house:t},on:{openModal:e.openModal}})],1)})),1),s("house-detail",{ref:"detailModal"})],1):s("b-container",{staticClass:"bv-example-row mt-3"},[s("b-row",[s("b-col",[s("b-alert",{attrs:{show:""}},[e._v("주택 목록이 없습니다.")])],1)],1)],1)},o=[],i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-card",{class:{"mouse-over-bgcolor":e.isColor},attrs:{"no-body":"","img-height":"150","img-src":s(5658)("./"+(this.house.aptCode%20+1)+".jpg"),"img-alt":"집이미지","img-top":""},on:{click:function(t){return e.selectHouse(e.house.aptCode)},mouseover:function(t){return e.colorChange(!0)},mouseout:function(t){return e.colorChange(!1)}}},[a("b-card-body",[a("b-card-title",[e._v(e._s(e.house.apartmentName))]),a("b-card-sub-title",{staticClass:"mb-2"},[e._v(e._s(e.house.dong))])],1)],1)},n=[],r=s(4665);const p="memberStore",u="houseStore";var c={name:"HouseListItem",data(){return{isColor:!1}},computed:{...(0,r.rn)(p,["userInfo"]),...(0,r.rn)(u,["hospitals"])},props:{house:Object},methods:{...(0,r.nv)(u,["getHouseDetail"]),selectHouse(e){this.$emit("openModal"),null!=this.userInfo?this.getHouseDetail({aptCode:e,userid:this.userInfo.userid}):this.getHouseDetail({aptCode:e,userid:null})},colorChange(e){this.isColor=e}}},l=c,h=s(1001),d=(0,h.Z)(l,i,n,!1,null,"e00c672a",null),m=d.exports,g=s(1339);const f="houseStore";var k={name:"HouseList",components:{HouseListItem:m,HouseDetail:g.Z},data(){return{}},created(){this.$emit("saveToggle",this.$route.name)},computed:{...(0,r.rn)(f,["houses","hospitals"])},methods:{openModal(){this.$refs.detailModal.$refs.modal.show()}}},b=k,v=(0,h.Z)(b,a,o,!1,null,null,null),w=v.exports},5658:function(e,t,s){var a={"./1.jpg":9290,"./10.jpg":2227,"./11.jpg":5771,"./12.jpg":5653,"./13.jpg":6412,"./14.jpg":925,"./15.jpg":5439,"./16.jpg":6501,"./17.jpg":4444,"./18.jpg":5158,"./19.jpg":2427,"./2.jpg":7157,"./20.jpg":8489,"./3.jpg":4150,"./4.jpg":4197,"./5.jpg":2055,"./6.jpg":9855,"./7.jpg":8445,"./8.jpg":6666,"./9.jpg":8571};function o(e){var t=i(e);return s(t)}function i(e){if(!s.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}o.keys=function(){return Object.keys(a)},o.resolve=i,e.exports=o,o.id=5658},9290:function(e,t,s){"use strict";e.exports=s.p+"img/1.ef562dbc.jpg"},2227:function(e,t,s){"use strict";e.exports=s.p+"img/10.75e17d98.jpg"},5771:function(e,t,s){"use strict";e.exports=s.p+"img/11.677eb0a5.jpg"},5653:function(e,t,s){"use strict";e.exports=s.p+"img/12.7ae550db.jpg"},6412:function(e,t,s){"use strict";e.exports=s.p+"img/13.d01efab6.jpg"},925:function(e,t,s){"use strict";e.exports=s.p+"img/14.251ecc1e.jpg"},5439:function(e,t,s){"use strict";e.exports=s.p+"img/15.91e6f69d.jpg"},6501:function(e,t,s){"use strict";e.exports=s.p+"img/16.6526a1c9.jpg"},4444:function(e,t,s){"use strict";e.exports=s.p+"img/17.039ab652.jpg"},5158:function(e,t,s){"use strict";e.exports=s.p+"img/18.cc6d0389.jpg"},2427:function(e,t,s){"use strict";e.exports=s.p+"img/19.251af543.jpg"},7157:function(e,t,s){"use strict";e.exports=s.p+"img/2.b1b1c1a9.jpg"},8489:function(e,t,s){"use strict";e.exports=s.p+"img/20.bc93da2b.jpg"},4150:function(e,t,s){"use strict";e.exports=s.p+"img/3.350a4389.jpg"},4197:function(e,t,s){"use strict";e.exports=s.p+"img/4.5187decd.jpg"},2055:function(e,t,s){"use strict";e.exports=s.p+"img/5.ac4ae36e.jpg"},9855:function(e,t,s){"use strict";e.exports=s.p+"img/6.02b5e77f.jpg"},8445:function(e,t,s){"use strict";e.exports=s.p+"img/7.920f10ef.jpg"},6666:function(e,t,s){"use strict";e.exports=s.p+"img/8.302d29de.jpg"},8571:function(e,t,s){"use strict";e.exports=s.p+"img/9.9c79693b.jpg"},816:function(e,t,s){"use strict";e.exports=s.p+"img/flat.0a6df7e9.png"},9325:function(e,t,s){"use strict";e.exports=s.p+"img/hospital.f1e3ea15.png"}}]);
//# sourceMappingURL=575.ae764323.js.map