"use strict";(self["webpackChunkhappyhouse"]=self["webpackChunkhappyhouse"]||[]).push([[999],{1339:function(a,e,t){t.d(e,{Z:function(){return m}});var n=function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("b-modal",{ref:"modal",staticClass:"bv-example-row",attrs:{id:"house-detail-modal",title:a.house.apartmentName},on:{hidden:a.CLEAR_HOUSE},scopedSlots:a._u([{key:"modal-footer",fn:function(){return[t("div",[t("p",{staticClass:"float-left"}),a.check||null==a.userInfo?a._e():t("b-button",{staticClass:"float-right",attrs:{variant:"primary",size:"sm"},on:{click:a.addApt}},[a._v(" 관심지역 추가 ")]),a.check&&null!=a.userInfo?t("b-button",{staticClass:"float-right",attrs:{variant:"danger",size:"sm"},on:{click:a.deleteApt}},[a._v(" 관심지역 취소 ")]):a._e()],1)]},proxy:!0}])},[t("b-container",{attrs:{fluid:""}},[t("div",{staticStyle:{width:"400px",height:"300px"},attrs:{id:"newMap"}})])],1)},s=[],o=t(3019),i=(t(1539),t(4747),t(561),t(1249),t(2222),t(9653),t(4665)),r=t(1457),p="houseStore",u="memberStore",l={name:"HouseDetail",data:function(){return{map:null,markers:[]}},computed:(0,o.Z)((0,o.Z)((0,o.Z)({},(0,i.rn)(p,["house","houses","hospitals"])),(0,i.rn)(u,["userInfo"])),{},{check:function(){return"Y"==this.house.check}}),methods:(0,o.Z)((0,o.Z)((0,o.Z)({},(0,i.OI)(p,["CLEAR_HOUSE"])),(0,i.nv)(p,["getHouseDetail","getHospitalList"])),{},{addApt:function(){var a=this;(0,r.qP)({userid:this.userInfo.userid,aptCode:this.house.aptCode},(function(e){var t=e.data;console.log(t);var n="등록 처리시 문제가 발생했습니다.";"success"===t.message&&(n="등록이 완료되었습니다.",a.house.check="Y",a.houses.push(a.house)),alert(n)}),(function(a){console.log(a)}))},deleteApt:function(){var a=this;(0,r.Fh)({userid:this.userInfo.userid,aptCode:this.house.aptCode},(function(e){var t=e.data,n="삭제 처리시 문제가 발생했습니다.";"success"===t.message&&(n="삭제가 완료되었습니다.",a.house.check="N",a.houses.forEach((function(e,t){e.aptCode==a.house.aptCode&&a.houses.splice(t,1)}))),alert(n)}),(function(a){console.log(a)}))},makeMarkers:function(){var a=this;this.markers=[];var e=null,n=t(9325);this.hospitals.forEach((function(t){e=new kakao.maps.Marker({map:a.map,position:new kakao.maps.LatLng(parseFloat(t.wgs84Lat),parseFloat(t.wgs84Lon)),title:t.dutyName,image:new kakao.maps.MarkerImage(n,new kakao.maps.Size(35,35))}),a.markers.push(e);var s=new kakao.maps.InfoWindow({position:new kakao.maps.LatLng(t.wgs84Lat,t.wgs84Lon),content:'<div style="width:200px;\n          display: block;\n          background: #50627F;\n          color: #fff;\n          text-align: center;\n          height: 24px;\n          line-height:22px;\n          border-radius:4px;\n          padding:0px 10px;">'.concat(t.dutyName,"</div>")});kakao.maps.event.addListener(e,"mouseover",a.makeOverListener(a.map,e,s)),kakao.maps.event.addListener(e,"mouseout",a.makeOutListener(s))}));var s=t(816);e=new kakao.maps.Marker({map:this.map,position:new kakao.maps.LatLng(parseFloat(this.house.lat),parseFloat(this.house.lng)),title:this.house.apartmentName,image:new kakao.maps.MarkerImage(s,new kakao.maps.Size(35,35))}),e.setMap(this.map),this.markers.push(e);var o='<div style="width:350px; text-align:center; padding:5px;"><h5>'.concat(this.house.apartmentName,'</h5></div>\n      <div style="width:350px; padding:5px">가격 : ').concat(this.house.lowest,",000 ~ ").concat(this.house.highest,",000원<br>\n      가까운 병원 : ").concat(this.calculation(),"</div>"),i=new kakao.maps.LatLng(this.house.lat,this.house.lng),r=new kakao.maps.InfoWindow({position:i,content:o});r.open(this.map,e)},initMap:function(){var a=document.getElementById("newMap"),e={center:new kakao.maps.LatLng(this.house.lat,this.house.lng),level:5};this.map=new kakao.maps.Map(a,e),this.map.setZoomable(!1)},setCenter:function(a,e){this.map.setCenter(new kakao.maps.LatLng(a,e))},makeOverListener:function(a,e,t){return function(){t.open(a,e)}},makeOutListener:function(a){return function(){a.close()}},calculation:function(){var a=this,e=Number.MAX_VALUE,t=-1;return this.hospitals.forEach((function(n,s){var o=parseFloat(n.wgs84Lat)-parseFloat(a.house.lat),i=parseFloat(n.wgs84Lon)-parseFloat(a.house.lng),r=Math.sqrt(Math.abs(o*o)+Math.abs(i*i));r<e&&(e=r,t=s)})),-1==t?"가까운 병원이 없습니다.":"".concat(this.hospitals[t].dutyName)}}),mounted:function(){var a=this;if(window.kakao&&window.kakao.maps)this.initMap();else{var e=document.createElement("script");e.src="//dapi.kakao.com/v2/maps/sdk.js?autoload=false&appkey=".concat("b9ba0fdeea1c1db7ad7f71e4962d1bb3"),e.addEventListener("load",(function(){kakao.maps.load(a.initMap)})),document.head.appendChild(e)}this.makeMarkers()},updated:function(){var a=this;if(window.kakao&&window.kakao.maps)this.initMap();else{var e=document.createElement("script");e.src="//dapi.kakao.com/v2/maps/sdk.js?autoload=false&appkey=".concat("b9ba0fdeea1c1db7ad7f71e4962d1bb3"),e.addEventListener("load",(function(){kakao.maps.load(a.initMap)})),document.head.appendChild(e)}this.makeMarkers()}},d=l,c=t(1001),h=(0,c.Z)(d,n,s,!1,null,null,null),m=h.exports},9999:function(a,e,t){t.r(e),t.d(e,{default:function(){return m}});var n=function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("div",{staticClass:"mapview"},[t("div",{attrs:{id:"map"}}),t("house-detail",{ref:"detailModal"})],1)},s=[],o=t(3019),i=(t(8309),t(1539),t(4747),t(1249),t(4665)),r=t(1339),p="houseStore",u="memberStore",l={components:{HouseDetail:r.Z},name:"HouseMap",data:function(){return{map:null,markers:[]}},created:function(){this.$emit("saveToggle",this.$route.name)},computed:(0,o.Z)((0,o.Z)({},(0,i.rn)(p,["house","houses","hospitals"])),(0,i.rn)(u,["userInfo"])),methods:(0,o.Z)((0,o.Z)({},(0,i.nv)(p,["getHouseDetail"])),{},{makeMarkers:function(){var a=this,e=this;if(this.markers.forEach((function(a){a.setMap(null)})),this.markers=[],0!=this.houses.length){this.map.setCenter(new kakao.maps.LatLng(this.houses[0].lat,this.houses[0].lng));var n=null,s=t(816);this.houses.forEach((function(t,o){n=new kakao.maps.Marker({map:a.map,position:new kakao.maps.LatLng(parseFloat(t.lat),parseFloat(t.lng)),title:t.apartmentName,image:new kakao.maps.MarkerImage(s,new kakao.maps.Size(35,35)),clickable:!0}),n.id="marker"+o,a.markers.push(n);var i=new kakao.maps.InfoWindow({position:new kakao.maps.LatLng(t.lat,t.lng),content:'<div style="width:200px;\n          display: block;\n          background: #50627F;\n          color: #fff;\n          text-align: center;\n          height: 24px;\n          line-height:22px;\n          border-radius:4px;\n          padding:0px 10px;">'.concat(t.apartmentName,"</div>")});kakao.maps.event.addListener(n,"mouseover",a.makeOverListener(a.map,n,i)),kakao.maps.event.addListener(n,"mouseout",a.makeOutListener(i)),kakao.maps.event.addListener(n,"click",(function(){var a;a=null==e.userInfo?null:e.userInfo.userid,e.getHouseDetail({userid:a,aptCode:t.aptCode}),e.$refs.detailModal.$refs.modal.show()}))}))}},initMap:function(){var a=document.getElementById("map"),e={center:new kakao.maps.LatLng(33.450701,126.570667),level:5};this.map=new kakao.maps.Map(a,e)},setCenter:function(a,e){this.map.setCenter(new kakao.maps.LatLng(a,e))},makeOverListener:function(a,e,t){return function(){t.open(a,e)}},makeOutListener:function(a){return function(){a.close()}}}),watch:{houses:function(){this.makeMarkers()}},mounted:function(){var a=this;if(window.kakao&&window.kakao.maps)this.initMap();else{var e=document.createElement("script");e.src="//dapi.kakao.com/v2/maps/sdk.js?autoload=false&appkey=".concat("b9ba0fdeea1c1db7ad7f71e4962d1bb3"),e.addEventListener("load",(function(){kakao.maps.load(a.initMap)})),document.head.appendChild(e)}this.makeMarkers()}},d=l,c=t(1001),h=(0,c.Z)(d,n,s,!1,null,"3fee0a70",null),m=h.exports},816:function(a,e,t){a.exports=t.p+"img/flat.0a6df7e9.png"},9325:function(a,e,t){a.exports=t.p+"img/hospital.f1e3ea15.png"}}]);
//# sourceMappingURL=999-legacy.ad14a21c.js.map