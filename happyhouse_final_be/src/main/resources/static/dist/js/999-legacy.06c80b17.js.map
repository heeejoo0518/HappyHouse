{"version":3,"file":"js/999-legacy.06c80b17.js","mappings":"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","sources":["webpack://happyhouse/./src/components/house/HouseDetail.vue?c27b","webpack://happyhouse/src/components/house/HouseDetail.vue","webpack://happyhouse/./src/components/house/HouseDetail.vue?6248","webpack://happyhouse/./src/components/house/HouseDetail.vue","webpack://happyhouse/./src/components/house/HouseMap.vue?b85d","webpack://happyhouse/src/components/house/HouseMap.vue","webpack://happyhouse/./src/components/house/HouseMap.vue?c7d8","webpack://happyhouse/./src/components/house/HouseMap.vue"],"sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('b-modal',{ref:\"modal\",staticClass:\"bv-example-row\",attrs:{\"id\":\"house-detail-modal\",\"title\":_vm.house.apartmentName},on:{\"hidden\":_vm.CLEAR_HOUSE},scopedSlots:_vm._u([{key:\"modal-footer\",fn:function(){return [_c('div',[_c('p',{staticClass:\"float-left\"}),(!_vm.check && _vm.userInfo != null)?_c('b-button',{staticClass:\"float-right\",attrs:{\"variant\":\"primary\",\"size\":\"sm\"},on:{\"click\":_vm.addApt}},[_vm._v(\" 관심지역 추가 \")]):_vm._e(),(_vm.check && _vm.userInfo != null)?_c('b-button',{staticClass:\"float-right\",attrs:{\"variant\":\"danger\",\"size\":\"sm\"},on:{\"click\":_vm.deleteApt}},[_vm._v(\" 관심지역 취소 \")]):_vm._e()],1)]},proxy:true}])},[_c('b-container',{attrs:{\"fluid\":\"\"}},[_c('div',{staticStyle:{\"width\":\"400px\",\"height\":\"300px\"},attrs:{\"id\":\"newMap\"}})])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <b-modal\r\n    id=\"house-detail-modal\"\r\n    ref=\"modal\"\r\n    :title=\"house.apartmentName\"\r\n    class=\"bv-example-row\"\r\n    @hidden=\"CLEAR_HOUSE\"\r\n  >\r\n    <b-container fluid>\r\n      <div id=\"newMap\" style=\"width: 400px; height: 300px\"></div>\r\n    </b-container>\r\n    <template #modal-footer>\r\n      <div>\r\n        <p class=\"float-left\"></p>\r\n\r\n        <b-button\r\n          variant=\"primary\"\r\n          size=\"sm\"\r\n          class=\"float-right\"\r\n          @click=\"addApt\"\r\n          v-if=\"!check && userInfo != null\"\r\n        >\r\n          관심지역 추가\r\n        </b-button>\r\n        <b-button\r\n          variant=\"danger\"\r\n          size=\"sm\"\r\n          class=\"float-right\"\r\n          @click=\"deleteApt\"\r\n          v-if=\"check && userInfo != null\"\r\n        >\r\n          관심지역 취소\r\n        </b-button>\r\n      </div>\r\n    </template>\r\n  </b-modal>\r\n</template>\r\n\r\n<script>\r\nimport { mapState, mapMutations, mapActions } from \"vuex\";\r\nimport { addLikeApt, deleteLikeApt } from \"@/api/house\";\r\n\r\nconst houseStore = \"houseStore\";\r\nconst memberStore = \"memberStore\";\r\n\r\nexport default {\r\n  name: \"HouseDetail\",\r\n  data() {\r\n    return {\r\n      map: null,\r\n      markers: [],\r\n    };\r\n  },\r\n  computed: {\r\n    ...mapState(houseStore, [\"house\", \"houses\", \"hospitals\"]),\r\n    ...mapState(memberStore, [\"userInfo\"]),\r\n    check() {\r\n      if (this.house.check == \"Y\") {\r\n        return true;\r\n      } else {\r\n        return false;\r\n      }\r\n    },\r\n  },\r\n  methods: {\r\n    ...mapMutations(houseStore, [\"CLEAR_HOUSE\"]),\r\n    ...mapActions(houseStore, [\"getHouseDetail\", \"getHospitalList\"]),\r\n\r\n    addApt() {\r\n      addLikeApt(\r\n        { userid: this.userInfo.userid, aptCode: this.house.aptCode },\r\n        ({ data }) => {\r\n          console.log(data);\r\n          let msg = \"등록 처리시 문제가 발생했습니다.\";\r\n          if (data.message === \"success\") {\r\n            msg = \"등록이 완료되었습니다.\";\r\n            this.house.check = \"Y\";\r\n            this.houses.push(this.house);\r\n          }\r\n          alert(msg);\r\n        },\r\n        (error) => {\r\n          console.log(error);\r\n        },\r\n      );\r\n    },\r\n\r\n    deleteApt() {\r\n      deleteLikeApt(\r\n        { userid: this.userInfo.userid, aptCode: this.house.aptCode },\r\n        ({ data }) => {\r\n          let msg = \"삭제 처리시 문제가 발생했습니다.\";\r\n          if (data.message === \"success\") {\r\n            msg = \"삭제가 완료되었습니다.\";\r\n            this.house.check = \"N\";\r\n            this.houses.forEach((hs, index) => {\r\n              if (hs.aptCode == this.house.aptCode) {\r\n                this.houses.splice(index, 1);\r\n              }\r\n            });\r\n          }\r\n          alert(msg);\r\n        },\r\n        (error) => {\r\n          console.log(error);\r\n        },\r\n      );\r\n    },\r\n\r\n    makeMarkers() {\r\n      this.markers = [];\r\n      let marker = null;\r\n      //병원 위치 넣기\r\n      var ImgHpt = require(\"@/assets/hospital.png\");\r\n      this.hospitals.forEach((hospital) => {\r\n        marker = new kakao.maps.Marker({\r\n          map: this.map,\r\n          position: new kakao.maps.LatLng(\r\n            parseFloat(hospital.wgs84Lat),\r\n            parseFloat(hospital.wgs84Lon),\r\n          ),\r\n          title: hospital.dutyName,\r\n          image: new kakao.maps.MarkerImage(\r\n            ImgHpt,\r\n            new kakao.maps.Size(35, 35),\r\n          ),\r\n        });\r\n        this.markers.push(marker);\r\n\r\n        var infowindow = new kakao.maps.InfoWindow({\r\n          position: new kakao.maps.LatLng(hospital.wgs84Lat, hospital.wgs84Lon),\r\n          content: `<div style=\"width:200px;\r\n          display: block;\r\n          background: #50627F;\r\n          color: #fff;\r\n          text-align: center;\r\n          height: 24px;\r\n          line-height:22px;\r\n          border-radius:4px;\r\n          padding:0px 10px;\">${hospital.dutyName}</div>`,\r\n        });\r\n        // 마커에 mouseover 이벤트와 mouseout 이벤트를 등록합니다\r\n        // 이벤트 리스너로는 클로저를 만들어 등록합니다\r\n        // for문에서 클로저를 만들어 주지 않으면 마지막 마커에만 이벤트가 등록됩니다\r\n        kakao.maps.event.addListener(\r\n          marker,\r\n          \"mouseover\",\r\n          this.makeOverListener(this.map, marker, infowindow),\r\n        );\r\n        kakao.maps.event.addListener(\r\n          marker,\r\n          \"mouseout\",\r\n          this.makeOutListener(infowindow),\r\n        );\r\n      });\r\n\r\n      //아파트 위치 넣기\r\n      var ImgApt = require(\"@/assets/flat.png\");\r\n      marker = new kakao.maps.Marker({\r\n        map: this.map,\r\n        position: new kakao.maps.LatLng(\r\n          parseFloat(this.house.lat),\r\n          parseFloat(this.house.lng),\r\n        ),\r\n        title: this.house.apartmentName,\r\n        image: new kakao.maps.MarkerImage(ImgApt, new kakao.maps.Size(35, 35)),\r\n      });\r\n      marker.setMap(this.map);\r\n      this.markers.push(marker);\r\n\r\n      var iwContent = `<div style=\"width:350px; text-align:center; padding:5px;\"><h5>${\r\n          this.house.apartmentName\r\n        }</h5></div>\r\n      <div style=\"width:350px; padding:5px\">가격 : ${this.house.lowest},000 ~ ${\r\n          this.house.highest\r\n        },000원<br>\r\n      가까운 병원 : ${this.calculation()}</div>`, // 인포윈도우에 표출될 내용으로 HTML 문자열이나 document element가 가능합니다\r\n        iwPosition = new kakao.maps.LatLng(this.house.lat, this.house.lng); //인포윈도우 표시 위치입니다\r\n\r\n      // 인포윈도우를 생성합니다\r\n      var infowindow = new kakao.maps.InfoWindow({\r\n        position: iwPosition,\r\n        content: iwContent,\r\n      });\r\n\r\n      // 마커 위에 인포윈도우를 표시합니다. 두번째 파라미터인 marker를 넣어주지 않으면 지도 위에 표시됩니다\r\n      infowindow.open(this.map, marker);\r\n    },\r\n    initMap() {\r\n      const container = document.getElementById(\"newMap\"); //지도를 담을 영역의 DOM 레퍼런스\r\n      const options = {\r\n        //지도를 생성할 때 필요한 기본 옵션\r\n        center: new kakao.maps.LatLng(this.house.lat, this.house.lng), //지도의 중심좌표.\r\n        level: 5, //지도의 레벨(확대, 축소 정도)\r\n      };\r\n      this.map = new kakao.maps.Map(container, options);\r\n\r\n      this.map.setZoomable(false);\r\n    },\r\n    setCenter(lat, lng) {\r\n      this.map.setCenter(new kakao.maps.LatLng(lat, lng));\r\n    },\r\n\r\n    // 인포윈도우를 표시하는 클로저를 만드는 함수입니다\r\n    makeOverListener(map, marker, infowindow) {\r\n      return function () {\r\n        infowindow.open(map, marker);\r\n      };\r\n    },\r\n\r\n    // 인포윈도우를 닫는 클로저를 만드는 함수입니다\r\n    makeOutListener(infowindow) {\r\n      return function () {\r\n        infowindow.close();\r\n      };\r\n    },\r\n\r\n    calculation() {\r\n      //현재 아파트 위치에서 가장 가까운 병원 저장(거리계산 알고리즘)\r\n      var min = Number.MAX_VALUE;\r\n      var i = -1;\r\n      this.hospitals.forEach((hospital, index) => {\r\n        var x = parseFloat(hospital.wgs84Lat) - parseFloat(this.house.lat);\r\n        var y = parseFloat(hospital.wgs84Lon) - parseFloat(this.house.lng);\r\n        var distance = Math.sqrt(Math.abs(x * x) + Math.abs(y * y));\r\n        if (distance < min) {\r\n          min = distance;\r\n          i = index;\r\n        }\r\n      });\r\n      if (i == -1) {\r\n        return `가까운 병원이 없습니다.`;\r\n      } else {\r\n        return `${this.hospitals[i].dutyName}`;\r\n      }\r\n    },\r\n  },\r\n  mounted() {\r\n    /* global kakao */\r\n    //script 태그 객체생성\r\n    if (!window.kakao || !window.kakao.maps) {\r\n      const script = document.createElement(\"script\");\r\n      //src 속성을 추가하며 .env.local에 등록한 서비스키 활용 동적로딩을 위해 autoload추가\r\n\r\n      script.src = `//dapi.kakao.com/v2/maps/sdk.js?autoload=false&appkey=${process.env.VUE_APP_KAKAOMAP_KEY}`;\r\n      script.addEventListener(\"load\", () => {\r\n        kakao.maps.load(this.initMap);\r\n      });\r\n      //document의 head에 script 추가\r\n      document.head.appendChild(script);\r\n    } else {\r\n      this.initMap();\r\n    }\r\n    this.makeMarkers();\r\n  },\r\n  updated() {\r\n    //script 태그 객체생성\r\n    if (!window.kakao || !window.kakao.maps) {\r\n      const script = document.createElement(\"script\");\r\n      //src 속성을 추가하며 .env.local에 등록한 서비스키 활용 동적로딩을 위해 autoload추가\r\n\r\n      script.src = `//dapi.kakao.com/v2/maps/sdk.js?autoload=false&appkey=${process.env.VUE_APP_KAKAOMAP_KEY}`;\r\n      script.addEventListener(\"load\", () => {\r\n        kakao.maps.load(this.initMap);\r\n      });\r\n      //document의 head에 script 추가\r\n      document.head.appendChild(script);\r\n    } else {\r\n      this.initMap();\r\n    }\r\n    this.makeMarkers();\r\n  },\r\n};\r\n</script>\r\n\r\n<style></style>\r\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./HouseDetail.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./HouseDetail.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./HouseDetail.vue?vue&type=template&id=5d9efc8f&\"\nimport script from \"./HouseDetail.vue?vue&type=script&lang=js&\"\nexport * from \"./HouseDetail.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"mapview\"},[_c('div',{attrs:{\"id\":\"map\"}}),_c('house-detail',{ref:\"detailModal\"})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!-- @format -->\r\n<template>\r\n  <div class=\"mapview\">\r\n    <div id=\"map\"></div>\r\n    <house-detail ref=\"detailModal\" />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapState, mapActions } from \"vuex\";\r\nimport HouseDetail from \"./HouseDetail.vue\";\r\nconst houseStore = \"houseStore\";\r\nconst memberStore = \"memberStore\";\r\n\r\nexport default {\r\n  components: { HouseDetail },\r\n  name: \"HouseMap\",\r\n  data() {\r\n    return {\r\n      map: null,\r\n      markers: [],\r\n    };\r\n  },\r\n  created() {\r\n    this.$emit(\"saveToggle\", this.$route.name);\r\n  },\r\n  computed: {\r\n    ...mapState(houseStore, [\"house\", \"houses\", \"hospitals\"]),\r\n    ...mapState(memberStore, [\"userInfo\"]),\r\n  },\r\n  methods: {\r\n    ...mapActions(houseStore, [\"getHouseDetail\"]),\r\n    makeMarkers() {\r\n      var t = this;\r\n      this.markers.forEach((marker) => {\r\n        marker.setMap(null);\r\n      });\r\n      this.markers = [];\r\n      if (this.houses.length == 0) return;\r\n\r\n      this.map.setCenter(\r\n        new kakao.maps.LatLng(this.houses[0].lat, this.houses[0].lng),\r\n      );\r\n\r\n      let marker = null;\r\n      var ImgApt = require(\"@/assets/flat.png\");\r\n      this.houses.forEach((house, idx) => {\r\n        marker = new kakao.maps.Marker({\r\n          map: this.map,\r\n          position: new kakao.maps.LatLng(\r\n            parseFloat(house.lat),\r\n            parseFloat(house.lng),\r\n          ),\r\n          title: house.apartmentName,\r\n          image: new kakao.maps.MarkerImage(\r\n            ImgApt,\r\n            new kakao.maps.Size(35, 35),\r\n          ),\r\n          clickable: true,\r\n        });\r\n        marker.id = \"marker\" + idx;\r\n        this.markers.push(marker);\r\n        var infowindow = new kakao.maps.InfoWindow({\r\n          position: new kakao.maps.LatLng(house.lat, house.lng),\r\n          content: `<div style=\"width:200px;\r\n          display: block;\r\n          background: #50627F;\r\n          color: #fff;\r\n          text-align: center;\r\n          height: 24px;\r\n          line-height:22px;\r\n          border-radius:4px;\r\n          padding:0px 10px;\">${house.apartmentName}</div>`,\r\n        });\r\n        // 마커에 mouseover 이벤트와 mouseout 이벤트를 등록합니다\r\n        // 이벤트 리스너로는 클로저를 만들어 등록합니다\r\n        // for문에서 클로저를 만들어 주지 않으면 마지막 마커에만 이벤트가 등록됩니다\r\n        kakao.maps.event.addListener(\r\n          marker,\r\n          \"mouseover\",\r\n          this.makeOverListener(this.map, marker, infowindow),\r\n        );\r\n        kakao.maps.event.addListener(\r\n          marker,\r\n          \"mouseout\",\r\n          this.makeOutListener(infowindow),\r\n        );\r\n        // 마커에 클릭이벤트를 등록합니다\r\n        kakao.maps.event.addListener(marker, \"click\", function () {\r\n          let id;\r\n          if (t.userInfo == null) id = null;\r\n          else id = t.userInfo.userid;\r\n          t.getHouseDetail({\r\n            userid: id,\r\n            aptCode: house.aptCode,\r\n          });\r\n          t.$refs.detailModal.$refs.modal.show();\r\n        });\r\n      });\r\n    },\r\n    initMap() {\r\n      const container = document.getElementById(\"map\"); //지도를 담을 영역의 DOM 레퍼런스\r\n      const options = {\r\n        //지도를 생성할 때 필요한 기본 옵션\r\n        center: new kakao.maps.LatLng(33.450701, 126.570667), //지도의 중심좌표.\r\n        level: 5, //지도의 레벨(확대, 축소 정도)\r\n      };\r\n      this.map = new kakao.maps.Map(container, options);\r\n    },\r\n    setCenter(lat, lng) {\r\n      this.map.setCenter(new kakao.maps.LatLng(lat, lng));\r\n    },\r\n    // 인포윈도우를 표시하는 클로저를 만드는 함수입니다\r\n    makeOverListener(map, marker, infowindow) {\r\n      return function () {\r\n        infowindow.open(map, marker);\r\n      };\r\n    },\r\n\r\n    // 인포윈도우를 닫는 클로저를 만드는 함수입니다\r\n    makeOutListener(infowindow) {\r\n      return function () {\r\n        infowindow.close();\r\n      };\r\n    },\r\n  },\r\n  watch: {\r\n    houses: function () {\r\n      this.makeMarkers();\r\n    },\r\n  },\r\n  mounted() {\r\n    if (!window.kakao || !window.kakao.maps) {\r\n      //script 태그 객체생성\r\n      const script = document.createElement(\"script\");\r\n\r\n      //src 속성을 추가하며 .env.local에 등록한 서비스키 활용 동적로딩을 위해 autoload추가\r\n      script.src = `//dapi.kakao.com/v2/maps/sdk.js?autoload=false&appkey=${process.env.VUE_APP_KAKAOMAP_KEY}`;\r\n      /* global kakao */\r\n      script.addEventListener(\"load\", () => {\r\n        kakao.maps.load(this.initMap);\r\n      });\r\n      //document의 head에 script 추가\r\n      document.head.appendChild(script);\r\n    } else {\r\n      this.initMap();\r\n    }\r\n    this.makeMarkers();\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n#map {\r\n  width: 100vw;\r\n  height: 100vh;\r\n  /* margin: 3rem; */\r\n}\r\n.mapview {\r\n  overflow: hidden;\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./HouseMap.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./HouseMap.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./HouseMap.vue?vue&type=template&id=3fee0a70&scoped=true&\"\nimport script from \"./HouseMap.vue?vue&type=script&lang=js&\"\nexport * from \"./HouseMap.vue?vue&type=script&lang=js&\"\nimport style0 from \"./HouseMap.vue?vue&type=style&index=0&id=3fee0a70&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3fee0a70\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_h","$createElement","_c","_self","ref","staticClass","attrs","house","apartmentName","on","CLEAR_HOUSE","scopedSlots","_u","key","fn","check","userInfo","_e","addApt","_v","deleteApt","proxy","staticStyle","staticRenderFns","name","data","map","markers","computed","mapState","methods","mapMutations","mapActions","addLikeApt","userid","aptCode","console","msg","alert","deleteLikeApt","makeMarkers","marker","position","parseFloat","title","image","ImgHpt","content","hospital","kakao","iwPosition","infowindow","initMap","center","level","setCenter","lat","lng","makeOverListener","makeOutListener","calculation","min","i","mounted","script","document","updated","component","components","HouseDetail","created","ImgApt","clickable","id","t","watch","houses"],"sourceRoot":""}